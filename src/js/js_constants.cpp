#include "js_constants.h"

#include "js_defines.h"

#include "input/hotkey.h"
#include "mujs/mujs.h"
#include "window/file_dialog.h"
#include "overlays/city_overlay_fwd.h"
#include "building/building.h"
#include "graphics/image_desc.h"
#include "graphics/image_groups.h"
#include "graphics/font.h"
#include "city/labor.h"

#include "sound/sound_city.h"

void js_register_game_constants(js_State *J) {
   REGISTER_GLOBAL_CONSTANT(J, FILE_TYPE_SAVED_GAME);
   REGISTER_GLOBAL_CONSTANT(J, FILE_DIALOG_LOAD);
}

void js_register_city_images(js_State *J) {
#define REGISTER_IMG(a, b) REGISTER_GLOBAL_CONSTANT(J, a);
#include "graphics/indexes.h"
#undef REGISTER_IMG
}

void js_register_collection_images(js_State *J) {
   REGISTER_GLOBAL_CONSTANT(J, PACK_UNLOADED);
   REGISTER_GLOBAL_CONSTANT(J, PACK_TERRAIN);
   REGISTER_GLOBAL_CONSTANT(J, PACK_GENERAL);
   REGISTER_GLOBAL_CONSTANT(J, PACK_SPR_MAIN);
   REGISTER_GLOBAL_CONSTANT(J, PACK_SPR_AMBIENT);
   REGISTER_GLOBAL_CONSTANT(J, PACK_EMPIRE);
   REGISTER_GLOBAL_CONSTANT(J, PACK_FONT);
   REGISTER_GLOBAL_CONSTANT(J, PACK_TEMPLE);
   REGISTER_GLOBAL_CONSTANT(J, PACK_MONUMENT);
   REGISTER_GLOBAL_CONSTANT(J, PACK_ENEMY)
   REGISTER_GLOBAL_CONSTANT(J, PACK_EXPANSION);
   REGISTER_GLOBAL_CONSTANT(J, PACK_EXPANSION_SPR);
   REGISTER_GLOBAL_CONSTANT(J, PACK_MASTABA);
   REGISTER_GLOBAL_CONSTANT(J, PACK_TEMPLE_RA);
   REGISTER_GLOBAL_CONSTANT(J, PACK_CUSTOM);
}

void js_register_city_walkers(js_State *J) {
#define REGISTER_FIGURE(a, b) REGISTER_GLOBAL_CONSTANT(J, a);
#include "figure/figure_type_indexes.h"
#undef REGISTER_FIGURE
}

void js_register_city_sound_constants(js_State *J) {
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_HOUSE_SLUM);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_HOUSE_POOR);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_HOUSE_MEDIUM);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_HOUSE_GOOD);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_HOUSE_POSH);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_BOOTH);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_BANDSTAND);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_PAVILION);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SENET_HOUSE);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_JUGGLER_SCHOOL);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_DANCE_SCHOOL);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_CONSERVATORY);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_GARDEN);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_APOTHECARY);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_PHYSICIAN);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_MORTUARY);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TOWER);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TEMPLE_OSIRIS);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TEMPLE_RA);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TEMPLE_PTAH);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TEMPLE_SETH);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TEMPLE_BAST);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SHRINE_OSIRIS);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SHRINE_RA);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SHRINE_PTAH);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SHRINE_SETH);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SHRINE_BAST);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_MARKET);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_GRANARY);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_STORAGE_YARD);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SHIPYARD);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_DOCK);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_WHARF);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_PALACE);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_ENGINEERS_POST);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_FORUM);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_WATER_SUPPLY);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_WELL);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_BURNING_RUIN);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_GRAIN_FARM);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_FIG_FARM);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_QUARRY);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_GOLD_MINE);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TIMBER_YARD);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_CLAY_PIT);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_WEAPONS_WORKSHOP);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_POTTERY_WORKSHOP);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_EMPTY_LAND);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_RIVER);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_HUNTER_LOUDGE);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_POLICE);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_ROCK);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_STATUE);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TAX_COLLECTOR);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_DENTIST);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_MANSION);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_TREE);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_WATER);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_SHRUB);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_CANAL);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_MEADOW);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_FLOODPLAIN);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_MARSHLAND);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_CHICKFARM);
   REGISTER_GLOBAL_CONSTANT(J, SOUND_CHANNEL_CITY_COWFARM);
}

void js_register_city_buildings(js_State *J) {
#define REGISTER_BLD(a, b) REGISTER_GLOBAL_CONSTANT(J, a);
#include "building/building_type_indexes.h"
#undef REGISTER_BLD
}

void js_register_ui_fonts(js_State *J) {
   REGISTER_GLOBAL_CONSTANT(J, FONT_SMALL_PLAIN)
   REGISTER_GLOBAL_CONSTANT(J, FONT_NORMAL_BLACK_ON_LIGHT)
   REGISTER_GLOBAL_CONSTANT(J, FONT_NORMAL_WHITE_ON_DARK)
   REGISTER_GLOBAL_CONSTANT(J, FONT_NORMAL_YELLOW)
   REGISTER_GLOBAL_CONSTANT(J, FONT_NORMAL_BLUE)
   REGISTER_GLOBAL_CONSTANT(J, FONT_LARGE_BLACK_ON_LIGHT)
   REGISTER_GLOBAL_CONSTANT(J, FONT_LARGE_BLACK_ON_DARK)
   REGISTER_GLOBAL_CONSTANT(J, FONT_SMALL_OUTLINED)
   REGISTER_GLOBAL_CONSTANT(J, FONT_NORMAL_BLACK_ON_DARK)
   REGISTER_GLOBAL_CONSTANT(J, FONT_SMALL_SHADED)
}

void js_register_city_labor_category(js_State *J) {
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_NONE);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_FOOD_PRODUCTION);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_INDUSTRY_COMMERCE);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_ENTERTAINMENT);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_RELIGION);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_EDUCATION);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_WATER_HEALTH);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_INFRASTRUCTURE);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_GOVERNMENT);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_MILITARY);
   REGISTER_GLOBAL_CONSTANT(J, LABOR_CATEGORY_SIZE);
}

void js_register_city_overlays(js_State *J) {
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_NONE);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_WATER);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_RELIGION);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_FIRE);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_DAMAGE);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_CRIME);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_ENTERTAINMENT);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_BOOTH);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_BANDSTAND);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_PAVILION);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_HIPPODROME);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_EDUCATION);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_SCRIBAL_SCHOOL);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_LIBRARY);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_ACADEMY);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_APOTHECARY);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_DENTIST);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_PHYSICIAN);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_MORTUARY);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_TAX_INCOME);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_FOOD_STOCKS);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_DESIRABILITY);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_WORKERS_UNUSED);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_NATIVE);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_PROBLEMS);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_RELIGION_OSIRIS);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_RELIGION_RA);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_RELIGION_PTAH);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_RELIGION_SETH);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_RELIGION_BAST);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_FERTILITY);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_BAZAAR_ACCESS);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_ROUTING);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_HEALTH);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_LABOR);
   REGISTER_GLOBAL_CONSTANT(J, OVERLAY_COUTHOUSE);
}

void js_register_city_resources(js_State *J) {
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_NONE);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_MIN);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_FOOD_MIN);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_GRAIN);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_MEAT);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_LETTUCE);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_CHICKPEAS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_POMEGRANATES);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_FIGS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_FISH);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_GAMEMEAT);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCES_FOODS_MAX);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_STRAW);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_WEAPONS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_CLAY);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_BRICKS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_POTTERY);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_BARLEY);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_BEER);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_FLAX);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_LINEN);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_GEMS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_LUXURY_GOODS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_TIMBER);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_GOLD);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_REEDS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_PAPYRUS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_STONE);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_LIMESTONE);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_GRANITE);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_UNUSED12);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_CHARIOTS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_COPPER);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_SANDSTONE);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_OIL);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_HENNA);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_PAINT);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_LAMPS);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_MARBLE);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCES_MAX);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_DEBEN);
    REGISTER_GLOBAL_CONSTANT(J, RESOURCE_TROOPS);
}